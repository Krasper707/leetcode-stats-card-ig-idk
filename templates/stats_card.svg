<!-- templates/stats_card.svg - FINAL VERSION with Balanced Bars -->
<svg width="550" height="250" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="title">
    <title id="title">{{ username }}'s LeetCode Stats</title>
    
    <defs>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=VT323&amp;display=swap');
            
            .text { font-family: 'VT323', monospace; font-size: 22px; }
            .window-header { fill: #3c3c3c; }
            .window-body { fill: {{ theme.background }}; stroke: {{ theme.border }}; stroke-width: 1.5; }
            .prompt { fill: {{ theme.prompt }}; }
            .command { fill: {{ theme.command }}; }
            .output-label { fill: {{ theme.output_label }}; }
            .output-value { fill: {{ theme.output_value }}; font-weight: 700; }
            .bar-easy { fill: #00B8A3; }
            .bar-medium { fill: #FFC01E; }
            .bar-hard { fill: #FF375F; }
        </style>
        <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="0.8" result="coloredBlur"/>
            <feMerge>
                <feMergeNode in="coloredBlur"/>
                <feMergeNode in="SourceGraphic"/>
            </feMerge>
        </filter>
        <pattern id="scanlines" width="4" height="4" patternUnits="userSpaceOnUse">
            <path d="M -1 1 H 5" stroke="#000" stroke-width="1" stroke-opacity="0.2"/>
        </pattern>
    </defs>
    <g>
        <rect x="0.5" y="0.5" width="549" height="249" rx="6" ry="6" class="window-body" />
        <rect x="1" y="1" width="548" height="30" rx="5" ry="5" class="window-header" />
        <circle cx="18" cy="16" r="6" fill="#ff5f56" />
        <circle cx="38" cy="16" r="6" fill="#ffbd2e" />
        <circle cx="58" cy="16" r="6" fill="#27c93f" />
        
        <g class="text">
            <g transform="translate(15, 65)">
                <text class="prompt">root@leetcode:~#</text>
                <text x="185" class="command">./fetch-stats --user {{ username }}</text>
            </g>
            <g transform="translate(15, 100)">
                <!-- Easy -->
                <text class="output-label" y="0">  Easy  </text>
                <text class="output-value" x="100" y="0"> [{{ easy_solved_str }}/ {{ total_easy }}]</text>
                <text class="output-value bar-easy" x="260" y="0">{{ '█' * ((easy_solved_num * 12 // total_easy) if total_easy > 0 else 0) }}{{ '─' * (12 - ((easy_solved_num * 12 // total_easy) if total_easy > 0 else 0)) }}</text>
                
                <!-- Medium -->
                <text class="output-label" y="35">  Medium</text>
                <text class="output-value" x="100" y="35"> [{{ medium_solved_str }}/ {{ total_medium }}]</text>
                <text class="output-value bar-medium" x="260" y="35">{{ '█' * ((medium_solved_num * 12 // total_medium) if total_medium > 0 else 0) }}{{ '─' * (12 - ((medium_solved_num * 12 // total_medium) if total_medium > 0 else 0)) }}</text>
                
                <!-- Hard -->
                <text class="output-label" y="70">  Hard  </text>
                <text class="output-value" x="100" y="70"> [{{ hard_solved_str }}/ {{ total_hard }}]</text>
                <text class="output-value bar-hard" x="260" y="70">{{ '█' * ((hard_solved_num * 12 // total_hard) if total_hard > 0 else 0) }}{{ '─' * (12 - ((hard_solved_num * 12 // total_hard) if total_hard > 0 else 0)) }}</text>
                
                <!-- Total -->
                <text class="output-label" y="105" style="font-weight: 700;">  Total </text>
                <text class="output-value" x="100" y="105"> [{{ total_solved_str }}/ {{ total_questions }}]</text>
            </g>
            <rect x="15" y="210" width="12" height="22" fill="{{ theme.prompt }}">
                <animate attributeName="opacity" values="0;1;0" dur="1s" repeatCount="indefinite" />
            </rect>
        </g>
    </g>
</svg>